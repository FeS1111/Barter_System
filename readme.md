# Бартерная система — Django-проект для обмена вещами

## Описание

Веб-приложение для размещения объявлений и обмена вещами между пользователями.  
Система реализует все основные сценарии обмена: добавление объявлений, поиск, предложения обмена, просмотр истории обменов и управление ими как через веб, так и через REST API с автоматической документацией.

---

## Содержание

- [Описание](#описание)
- [Архитектура и структура данных](#архитектура-и-структура-данных)
- [Реализация API](#реализация-api)
- [Реализация веб-интерфейса](#реализация-веб-интерфейса)
- [Валидация, бизнес-логика и права](#валидация-бизнес-логика-и-права)
- [Тестирование](#тестирование)
- [Инструкция по запуску](#инструкция-по-запуску)
- [Основные функции проекта](#основные-функции-проекта)

---

##  Архитектура и структура данных

#### **Ad (Объявление)**
- `id` — автоинкрементный первичный ключ
- `user` — ForeignKey на пользователя-владельца
- `title` — заголовок объявления
- `description` — подробное описание
- `category` — категория
- `condition` — состояние
- `created_at` — дата и время создания

#### **ExchangeProposal (Предложение обмена)**
- `id` — автоинкрементный первичный ключ
- `ad_sender` — ForeignKey на объявление, с которого предлагается обмен
- `ad_receiver` — ForeignKey на объявление, на которое предлагается обмен
- `comment` — комментарий к предложению
- `status` — статус предложения ("pending" — Ожидает, "accepted" — Принята, "declined" — Отклонена)
- `created_at` — дата создания

---

## Реализация API

- `GET /api/ads/` — список объявлений
- `POST /api/ads/` — создать объявление (только авторизованный пользователь)
- `GET /api/ads/<id>/` — получить объявление по id
- `PATCH|PUT /api/ads/<id>/` — редактировать объявление (только автор)
- `DELETE /api/ads/<id>/` — удалить объявление (только автор)
- `GET /api/proposals/` — получить список предложений обмена пользователя
- `POST /api/proposals/` — создать предложение обмена
- `GET /api/proposals/<id>/` — получить предложение по id
- `PATCH /api/proposals/<id>/` — изменить статус предложения

---

## Реализация веб-интерфейса

- Главная страница — список объявлений с поиском и фильтрацией
- Кнопки “Создать объявление”, “Изменить”, “Удалить” доступны только автору
- Для чужих объявлений — “Предложить обмен”
- Страница всех моих предложений обмена с возможностью изменить статус предложения

---

## Валидация

- **Авторизация:** все функции, кроме просмотра объявлений, доступны только зарегистрированным пользователям
- **Создание/удаление/редактирование объявлений** — только для их авторов
- **Обработка предложений обмена** — только получатель предложения может изменить его статус
- **Статусы предложений** — “Ожидает”, “Принята”, “Отклонена”;

---

## Тестирование

- В проекте реализованы unit-тесты:
  - Проверка создания объявлений, предложений
  - Проверка логики обмена, смены статусов

**Запуск тестов:**
```bash
python manage.py test
```

---

## Инструкция по запуску

### **Клонирование репозитория**

```bash
git clone <your_repo_url>
cd <project_folder>
python -m venv venv
venv\Scripts\activate для Windows, source venv/bin/activate  для Linux/Mac
pip install -r requirements.txt
```

### **Настройка БД**

- В файле barter_system/settings.py укажите свои параметры для PostgreSQL

### **Миграции и суперпользователь**
```bash
python manage.py makemigrations
python manage.py migrate
python manage.py createsuperuser
```

### **Запуск сервера**
```bash
python manage.py runserver
```

---

## Основные функции проекта

### **Пользовательские сценарии**

- CRUD для объявлений
- Поиск, фильтрация, пагинация объявлений
- Обмены: отправка предложений, просмотр и обработка всех своих обменов
- Смена статусов предложений
- Оповещения об ошибках 

### **API**

- Автоматическая OpenAPI-документация генерируется и доступна по адресам:

  - Swagger UI: http://localhost/api/docs/
  - Redoc: http://localhost/api/redoc/
  - OpenAPI schema: http://localhost/api/schema/
